"use strict";var _=require("lodash"),DB=require("./clients").getClient,isString=function(e){return _.isString(e)},isNumber=function(e){return _.isNumber(e)&&_.isFinite(e)&&!isString(e)},isBoolean=function(e){return _.isBoolean(e)},isDate=function(e){return isNumber(e)||_.isDate(e)||isNumber(Date.parse(e))},isBuffer=function(e){return"object"==typeof e||e instanceof Buffer},isObject=function(e){return _.isObject(e)},isArray=function(e){return _.isArray(e)},isDocument=function(e){return e&&e.documentClass&&"document"===e.documentClass()},isEmbeddedDocument=function(e){return e&&e.documentClass&&"embedded"===e.documentClass()},isReferenceable=function(e){return isDocument(e)||isNativeId(e)},isNativeId=function(e){return DB().isNativeId(e)},isSupportedType=function(e){return e===String||e===Number||e===Boolean||e===Buffer||e===Date||e===Array||isArray(e)||e===Object||e instanceof Object||"function"==typeof e.documentClass},isType=function(e,r){if(r===String)return isString(e);if(r===Number)return isNumber(e);if(r===Boolean)return isBoolean(e);if(r===Buffer)return isBuffer(e);if(r===Date)return isDate(e);if(r===Array||isArray(r))return isArray(e);if(r===Object)return isObject(e);if(r.documentClass&&"document"===r.documentClass())return isDocument(e)||DB().isNativeId(e);if(r.documentClass&&"embedded"===r.documentClass())return isEmbeddedDocument(e);if(r===DB().nativeIdType())return isNativeId(e);throw new Error("Unsupported type: "+r.name)},isValidType=function(e,r){if(null===e)return!0;if(void 0===e)return!0;if(r===Array||isArray(r)){if(isArray(r)&&r.length>1)throw new Error("Unsupported type. Only one type can be specified in arrays, but multiple found:",+r);if(isArray(r)&&1===r.length&&isArray(e))for(var i=r[0],t=0;t<e.length;t++){var n=e[t];if(!isType(n,i))return!1}else{if(isArray(r)&&0===r.length&&!isArray(e))return!1;if(r===Array&&!isArray(e))return!1}return!0}return isType(e,r)},isInChoices=function(e,r){return!e||e.indexOf(r)>-1},isEmptyValue=function(e){return void 0===e||!("number"==typeof e||e instanceof Date||"boolean"==typeof e)&&0===Object.keys(e).length};exports.isString=isString,exports.isNumber=isNumber,exports.isBoolean=isBoolean,exports.isDate=isDate,exports.isBuffer=isBuffer,exports.isObject=isObject,exports.isArray=isArray,exports.isDocument=isDocument,exports.isEmbeddedDocument=isEmbeddedDocument,exports.isReferenceable=isReferenceable,exports.isNativeId=isNativeId,exports.isSupportedType=isSupportedType,exports.isType=isType,exports.isValidType=isValidType,exports.isInChoices=isInChoices,exports.isEmptyValue=isEmptyValue;