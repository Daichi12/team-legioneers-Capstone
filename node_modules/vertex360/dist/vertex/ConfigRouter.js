const express=require("express"),path=require("path");var Router=require("./Router");const BASE_DIR=__dirname+"/../../../../";class ConfigRouter{constructor(t){this.site_id=t.site_id,this.api_key=t.api_key,this.env=t.env||"dev",this.tmp=t.tmp||"/tmp",this.turbo=require("turbo360")({site_id:t.site_id}),this.createRouter=this.createRouter.bind(this),this.populateRouter=this.populateRouter.bind(this),this.local=this.local.bind(this),this.prod=this.prod.bind(this)}createRouter(t){return"dev"==t?new express.Router:new Router}populateRouter(t,e){t.get("/:pagename",(t,r)=>{e(t.params.pagename,t).then(t=>{r.data(t)}).catch(t=>{r.json({confirmation:"fail",message:t.message})})})}local(t){const e=this.createRouter("dev");return this.populateRouter(e,t),e}prod(t){const e=this.createRouter("prod");return this.populateRouter(e,t),e}router(t){const e=this.createRouter(this.env);return this.populateRouter(e,t),e}}module.exports=ConfigRouter;